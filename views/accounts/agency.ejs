<%- include ('../partials/header'); -%>
<%- include ('../partials/loader'); -%>
	<%- include ('../partials/sidebar'); -%>
		<%- include ('../partials/topbar'); -%>

			<head>

			</head>

			<body>
				<div class="container-fluid content-inner mt-4">
					<div class="row">
						<div class="col-sm-12">
							<div class="card">
								<div id="user-role" data-permissions="<%= permissions %>"></div>
								<!-- Dynamic Table Responsive -->
								<div class="card-header d-flex justify-content-between align-items-center">
									<h3 class="card-title"><div class="breadcrumb1 flat">
										<a href="/dashboard" ><span class="fa fa-home"></span></a>
										
										<a href="/agency"class="active"><%= __('agency.agents') %></a>
									</div></h3>

									
									  

									<div class="d-flex align-items-center gap-2">
										<button class="btn btn-secondary d-none" id="bulkEditBtn">
										  <i class="fa fa-pen"></i> <%= __('agency.edit') %>
										</button>
										<button class="btn btn-danger d-none" id="bulkDeleteBtn">
										  <i class="fa fa-trash"></i> <%= __('agency.delete') %>
										</button>
										<button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#modal-new-agency">
										  <i class="fa fa-plus"></i> <%= __('agency.new_agent') %>
										</button>
									  </div>
									  
								</div>
								
							  <!-- Card Body: Grid Container -->
							  <div class="card-body ">
								<div class="row mb-3 align-items-center">
									<div class="col-md-auto mb-2 mb-md-0">
									  <div class="form-check">
										<input class="form-check-input" type="checkbox" id="selectAllAgents">
										<label class="form-check-label" for="selectAllAgents"><%= __('agency.select_all') %></label>
									  </div>
									</div>
									
									<div class="col-md-auto ms-auto">
										<div class="input-group search-group position-relative" style="max-width: 250px;">
										  <span class="input-group-text bg-white rounded-0">
											<i class="fa fa-search"></i>
										  </span>
										  <input type="text" id="agentSearch" class="form-control rounded-0 shadow-none pe-4" placeholder="Search agent...">
										  
										  <!-- Clear button -->
										  <button id="clearSearchBtn" type="button"
											class="btn position-absolute end-0 top-50 translate-middle-y me-2 p-0 border-0 bg-transparent d-none"
											style="z-index: 5;">
											<i class="fa fa-times text-muted small"></i>
										  </button>
										</div>
									  </div>
									  
									  
									  
									  
									  
								  </div>
								  
								  

								<div id="agency-grid" class="row">
									
								  <!-- Dito ida-dynamically append ang mga “card” ng bawat Agent -->
								</div>
								<nav  id="pagination-container" class="mt-4 d-flex justify-content-center">
									<ul class="pagination  flex-wrap "></ul>
								  </nav>
							  </div>
							</div>
						</div>
					</div>
				</div>
				<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
			</body>
			<%- include ('../modals/accounts/new_agency'); -%>
				<%- include ('../modals/accounts/edit_agency'); -%>
				<%- include ('../modals/accounts/account_ledger_modal'); -%>
				<%- include ('../modals/accounts/account_details'); %>
				<%- include ('../modals/accounts/transfer_account'); %>
				<%- include ('../modals/accounts/new_agent') %>
				<%- include ('../modals/accounts/edit_agent') %>

					<%- include ('../partials/footer'); -%>
						<!-- <script src="assets/js/datatables/agency_tables_datatables.min.js"></script> -->
						<script src="/assets/js/functions/agency.js"></script>
						<script src="/assets/js/functions/account.js"></script>
						<script src="/assets/js/functions/agent.js"></script>

<style>



/* Kapag naka-check, gagamit ng .icon-primary:
   - Ito lang ang magpapalit ng "color" (hindi background) */
.icon-primary {
  color: var(--bs-primary); /* o #0d6efd, etc. */
}




#clearSearchBtn:hover i {
  
  cursor: pointer;
}




.search-group {
  border: 1px solid #eee;
  border-radius: 6px;
  overflow: hidden;
  display: flex;
}

.search-group:focus-within {
 
  border-color: #2f5bea;
}

.search-group .input-group-text,
.search-group .form-control {
  border: none !important;
  box-shadow: none !important;
}

	 #bulkEditBtn, #bulkDeleteBtn {
  transition: all 0.2s ease;
}

.agency-card {
  background: #eee;
  border-radius: 12px;
  box-shadow: 3px 3px 12px #d1d9e6, -3px -3px 12px #ffffff;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
  position: relative;
}



.agency-card .form-check-input {
  width: 18px;
  height: 18px;
  cursor: pointer;
  
}

.agency-name {
  font-weight: 600;
  font-size: 14px;
  color: #5a6474;
  text-decoration: none;
}

.agency-name:hover {
  color: #2f5bea;
}
.swal2-timer-progress-bar {
  background: #2f5bea !important;
}





</style>

<script>
   
  
    // Kung kailangan mo ng select2 init:
  
      $('.js-select2').select2({
        placeholder: 'Select an option',
        dropdownParent: '#modal-transfer_account'
      });
      $('.js-select2').select2({
        placeholder: 'Select an option',
        dropdownParent: '#modal-add-account-details'
      });
	    $('.js-select2').select2({
            dropdownParent: '#modal-new-agent'
          });
    
          $('.edit_agency').select2({
            dropdownParent: '#modal-edit-agent'
          });
  

  </script>